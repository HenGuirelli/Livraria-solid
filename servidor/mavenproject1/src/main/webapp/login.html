<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="resources/css/style.css">
    <link rel="stylesheet" href="resources/css/cadastroUsuario.css">
    <title>Livraria</title>
</head>

<body>
    <nav class="menu">
        <div class="acesso menu-direito">
            <button onClick="window.location.href = baseURL + '/login.html'">login</button>
            <button onClick="window.location.href = baseURL + '/cadastro.html'">cadastro</button>
        </div>
        <div class="meus-pedidos menu-direito">
            <button onClick="window.location.href = baseURL + '/meus_pedidos.html'">Meus pedidos</button>
        </div>

        <div class="pesquisa-livros">
            <input type="text" placeholder="Pesquisar por nome, editora ou autor" id='barra-pesquisa'/>
            <button onClick="window.location.href = baseURL + '/pesquisa.html?pesquisa=' + document.querySelector('#barra-pesquisa').value">Pesquisar</button>
        </div>
    </nav>

    <main class="cadastro">
        <form>
            <div>
                <label>
                    Login:
                    <br>
                    <input type="text" requried id="login" />
                </label>
            </div>

            <div>
                <label>
                    Senha:
                    <br>
                    <input type="password" required id="senha" />
                </label>
            </div>
            <br><br><br>
            <button onClick="eventoLogar(event)"> Entrar </button>
        </form>
    </main>

</body>
<script src="resources/scripts/common.js"></script>
<script src="resources/scripts/conta.js"></script>
<script type="text/javascript">
    const eventoLogar = (e) => {
        e.preventDefault()
        const login = document.querySelector('#login').value
        const senha = document.querySelector('#senha').value

        logar(login, senha)
            .then(result => {
                if (result.success) {
                    sessionStorage.setItem('logado', login)
                    window.location = baseURL + '/index.html'
                } else {
                    alert('login ou senha incorretos')
                }
                logado = result.success
            })
    }
</script>

</html>